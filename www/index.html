<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>بسم الله الرحمن الرحیم</title>

	<!-- Required libs -->
	<script src="js/jquery-1.11.3.min.js"></script>
	<script src="js/console.log.js"></script>
	<script src="phonegap.js"></script>
	<script src="js/persian_number_to_english.js"></script>
	<script src="js/notification.js"></script>
	<script src="js/jquery.md5.js"></script>
	<script src="onsenui/js/onsenui.min.js"></script>
	<script src="js/lang.ar.js"></script>
	<script src="js/lang.fa.js"></script>
	<script src="js/lang.en.js"></script>
	<link rel="stylesheet" href="onsenui/css/onsenui.min.css">
	<link rel="stylesheet" href="onsenui/css/onsen-css-components.min.css">
	<link rel="stylesheet" href="css/fontiran.css">
	<link rel="stylesheet" href="css/arabic_font.css">
	<link rel="stylesheet" href="css/home.css">
	
	<style>
		
	</style>
	<script>
		if(window.localStorage.getItem('language') == null)
		{
			text_direction = "english_text";
			lang = lang_en;
		}
		else
		{
			text_direction = window.localStorage.getItem('text_direction');
			lang = window[window.localStorage.getItem('language')];
		}
		
		function set_body_language(){
			body = $("body");
			body.removeClass("english_text");
			body.removeClass("arabic_text");
			body.removeClass("persian_text");
			body.addClass(text_direction);
		}
		
		function isHighDensity(){
			return ((window.matchMedia && (window.matchMedia('only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)').matches || window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)').matches)) || (window.devicePixelRatio && window.devicePixelRatio > 1.3));
		}
		function isRetina(){
			return ((window.matchMedia && (window.matchMedia('only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)').matches || window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)').matches)) || (window.devicePixelRatio && window.devicePixelRatio >= 2)) && /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
		}
		function check_retina() {
			if(isHighDensity() || isRetina())
			{
				$('.retina').each( function(i) {
					if($(this).attr("src"))
						$(this).attr('src', $(this).attr('retina'));
					else
					{
						var temp_baclground_image = $(this).css('background-image');
						if(temp_baclground_image!="" && temp_baclground_image!="none" && temp_baclground_image.indexOf('-xx.png') === -1 && temp_baclground_image.indexOf('-xx.png') === -1)
							$(this).css('background-image', temp_baclground_image.replace('.png' , '-xx.png').replace('.jpg' , '-xx.jpg'));
					}
				});
			}
		}
		function init() {		
			console.log('SMGROUP ::::::::::::::::::::::::::::::::::::	start init()');
			document.addEventListener("deviceready", onDeviceReady, false);
			set_body_language();
		}
		function onDeviceReady() {
			if(window.localStorage.getItem('uuid') == null)
				window.plugins.uniqueDeviceID.get(uniqueDeviceIDsuccess_index, alertDismissed);
				
			register_notification_home();
			
		
			//if ( device.platform == 'Android' ){//Android,iOS,win7=WinCE,win8=Win32NT
			//	document.addEventListener("backbutton", go_back_index, false);
			//}
			//var networkState = navigator.connection.type;
			//if (networkState == Connection.NONE) {
			//	need_internet();
			//}
		}
		function go_back_index() {
			//StartScan();
			navigator.notification.confirm(
				multilang.get('do_you_want_to_exit_the_application'),	// message
				onExitConfirm,											// callback
				multilang.get('notice'),								// title
				[multilang.get('yes'),multilang.get('no')]				// buttonName
			);
		}
		function onExitConfirm(buttonIndex) {
			if(buttonIndex==1)
				navigator.app.exitApp();
		}
		function need_internet() {
			$("#need_wifi").css("display","table");
			navigator.notification.alert(
				multilang.get('you_must_connect_to_the_internet'),  // message
				alertDismissed,		 // callback
				multilang.get('warning'),			// title
				multilang.get('ok')		// buttonName
			);
		}
		function alertDismissed() {}
		function uniqueDeviceIDsuccess_index(uuid){window.localStorage.setItem('uuid',uuid);}
		function fromTemplate(text) {
			var dialog = document.getElementById('dialog-alert');
			if (dialog) {
				$('#dialog-text').html(text);
				dialog.show();
			}
			else {
				ons.createDialog('dialog.html')
					.then(function (dialog) {
					$('#dialog-text').html(text);
					dialog.show();
				});
			}
		};
		function hideDialog(id) {
			document.getElementById(id).hide();
		};
		function check_server(handle_check_server) {
			var timeStampInMs = window.performance && window.performance.now && window.performance.timing && window.performance.timing.navigationStart ? window.performance.now() + window.performance.timing.navigationStart : Date.now();
			$.ajax({
					url: server_url,
					type: "POST",
					data: {
						act: "check_net",//timeStampInMs
					},
					//async: true,
					success : function(text)
					{
						modal.hide({animation: "fade"});
						handle_check_server(text);
					},
					error: function(jqXHR, exception) {
						$('#modal-text').html('<ons-icon icon="fa-wifi" size="28px"></ons-icon> <span>' + multilang.get('you_must_connect_to_the_internet') + '</span>');
						modal.show({animation: "fade"});
						setTimeout(function(){ modal.hide({animation: "fade"}); }, 2000);
					},
			});
		}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
		server_url = "http://192.168.0.143/autobus/check_net.php";
		
		//ons.platform.select('android');
		ons.platform.select('ios');
		//ons.forcePlatformStyling('ios');
		ons.disableAutoStatusBarFill();
		ons.disableAutoStyling();
		
		document.addEventListener('init', function(event) {
			//StatusBar.hide;
			var page = event.target;
			modal = document.querySelector('ons-modal');
			
			//////////////////////////////////////////////////////////////////////////////////////////
			//////////////////////////////////////////////////////////////////////////////////////////
			//////////////////////////////////////////////////////////////////////////////////////////
			//مدیریت منوی همبرگری
			window.fn = {};

			window.fn.open = function() {
				var menu = document.getElementById('menu');
				menu.open();
			};

			window.fn.load = function(page, data) {
				var content = document.getElementById('myNavigator');
				var menu = document.getElementById('menu');
				content.pushPage(page, data)
					.then(menu.close.bind(menu));
			};

			window.fn.pop = function() {
				var content = document.getElementById('myNavigator');
				content.popPage();
			};
			//////////////////////////////////////////////////////////////////////////////////////////
			//////////////////////////////////////////////////////////////////////////////////////////
			//////////////////////////////////////////////////////////////////////////////////////////

			if (page.id === 'home') {
				check_retina();

				page.querySelector('#goto_page_language_ar').onclick = function() {
					lang = lang_ar;
					text_direction = "arabic_text";
					set_body_language();
					window.localStorage.setItem('language',"lang_ar");
					window.localStorage.setItem('text_direction',text_direction);
					document.querySelector('#myNavigator').pushPage('select_user_type.html', {animation: "slid",animationOptions:{delay: 0.4} });
				};
				page.querySelector('#goto_page_language_en').onclick = function() {
					lang = lang_en;
					text_direction = "english_text";
					set_body_language();
					window.localStorage.setItem('language',"lang_en");
					window.localStorage.setItem('text_direction',text_direction);
					document.querySelector('#myNavigator').pushPage('select_user_type.html', {animation: "slid",animationOptions:{delay: 0.4} });
				};
				page.querySelector('#goto_page_language_fa').onclick = function() {
					lang = lang_fa;
					text_direction = "persian_text";
					set_body_language();
					window.localStorage.setItem('language',"lang_fa");
					window.localStorage.setItem('text_direction',text_direction);
					document.querySelector('#myNavigator').pushPage('select_user_type.html', {animation: "slid",animationOptions:{delay: 0.4} });
				};
			}else if (page.id === 'select_user_type') {
				check_retina();
				need_translate();
				
				page.querySelector('#goto_page_user_type_zaer').onclick = function() {
					document.querySelector('#myNavigator').pushPage('zaer_services.html', {animation: "slid",animationOptions:{delay: 0.4} });
				};
				page.querySelector('#goto_page_user_type_mukeb').onclick = function() {
					document.querySelector('#myNavigator').pushPage('zaer_services.html', {animation: "slid",animationOptions:{delay: 0.4} });
				};
			}else if (page.id === 'zaer_services') {
				check_retina();
				need_translate();
				
			}
	
		});
	</script>
</head>
<body onload="init();" >
	<ons-page>
		<ons-splitter>
			<!-- <ons-splitter-side id="menu" side="left" width="220px" swipe-target-width="150px" collapse swipeable> -->
			<ons-splitter-side id="menu" side="left" width="220px" collapse>
				<ons-page>
					<ons-list>
						<!-- منوهای عربی -->
						<ons-list-item tappable onclick="fn.load('home.html')" class="just_arabic">
							تغيير اللغة
						</ons-list-item>
						<ons-list-item tappable onclick="fn.load('select_user_type.html')" class="just_arabic">
							تغيير نوع المستخدم
						</ons-list-item>
						<ons-list-item tappable onclick="fn.load('zaer_services.html')" class="just_arabic">
							قائمة خيارات الزائر
						</ons-list-item>
						
						<!-- منوهای انگلیسی -->
						<ons-list-item tappable onclick="fn.load('home.html')" class="just_english">
							Change language
						</ons-list-item>
						<ons-list-item tappable onclick="fn.load('select_user_type.html')" class="just_english">
							Change user type
						</ons-list-item>
						<ons-list-item tappable onclick="fn.load('zaer_services.html')" class="just_english">
							List of User Options
						</ons-list-item>
						
						<!-- منوهای فارسی -->
						<ons-list-item tappable onclick="fn.load('home.html')" class="just_persian">
							تغییر زبان
						</ons-list-item>
						<ons-list-item tappable onclick="fn.load('select_user_type.html')" class="just_persian">
							تغییر نوع کاربر
						</ons-list-item>
						<ons-list-item tappable onclick="fn.load('zaer_services.html')" class="just_persian">
							فهرست امکانات زائر
						</ons-list-item>
					</ons-list>
				</ons-page>
			</ons-splitter-side>
			<ons-splitter-content id="content" page="homePage.html"></ons-splitter-content>
		</ons-splitter>
	</ons-page>
	
	<ons-template id="homePage.html">
		<ons-page id="homePage">
			<!-- <ons-navigator id="myNavigator" page="home.html" swipe-target-width="50px" swipeable></ons-navigator> -->
			<ons-navigator id="myNavigator" page="zaer_services.html" swipe-target-width="50px" swipeable></ons-navigator>
		</ons-page>
	</ons-template>
	

	<template id="home.html">
		<ons-page id="home" on-device-backbutton="go_back_index();">
			<div class="select_language_page_bg retina" ></div>
			<div class="select_language_page">
				<div id="goto_page_language_ar" class="select_language_btn"></div>
				<div id="goto_page_language_en" class="select_language_btn"></div>
				<div id="goto_page_language_fa" class="select_language_btn"></div>
			</div>
		</ons-page>
	</template>
	<template id="home2.html">
		<ons-page id="home2" on-device-backbutton="go_back_index();">
			<div class="select_language_page_bg retina" ></div>
			<div class="select_language_page">
				<div id="goto_page_language_ar" class="select_language_btn"></div>
				<div id="goto_page_language_en" class="select_language_btn"></div>
				<div id="goto_page_language_fa" class="select_language_btn"></div>
			</div>
		</ons-page>
	</template>

	<template id="select_user_type.html">
		<ons-page id="select_user_type" >
			<div class="page_bg retina" ></div>
			<div class="page_select_user_type retina" ></div>
			<div class="select_user_type_page">
				<div id="top_text" class="need_translate" translate="Please_Select_Your_Login_Type" >Please Select Your Login Type</div>
				<div id="goto_page_user_type_zaer" class="select_user_type_btn"  ><div class="need_translate" translate="The_pilgrim">The pilgrim</div></div>
				<div id="goto_page_user_type_mukeb" class="select_user_type_btn" ><div class="need_translate" translate="Tent_manager">Tent manager</div></div>
			</div>
		</ons-page>
	</template>

	<template id="zaer_services.html">
		<ons-page id="zaer_services" >
			<div class="page_bg_overflow retina" >
				<!--
				<ons-toolbar>
					<div class="left">
						<ons-toolbar-button onclick="fn.open()">
							<ons-icon icon="md-menu"></ons-icon>
						</ons-toolbar-button>
					</div>
					<div class="center">Main</div>
				</ons-toolbar>
				-->
				<div class="left-top-menu">
					<ons-toolbar-button onclick="fn.open()">
						<ons-icon icon="md-menu" class="menu-btn"></ons-icon>
					</ons-toolbar-button>
				</div>

				<p style="text-align: center; color:#ffffff;padding-top: 0px;">
				  786<br>
				  1<br>
				  2<br>
				  3<br>
				  4<br>
				  5<br>
				  6<br>
				  7<br>
				  8<br>
				  9<br>
				  0<br>
				  1<br>
				  2<br>
				  3<br>
				  4<br>
				  5<br>
				  6<br>
				  7<br>
				  1<br>
				  2<br>
				  3<br>
				  4<br>
				  5<br>
				  6<br>
				  7<br>
				  8<br>
				  9<br>
				  0<br>
				  1<br>
				  2<br>
				  3<br>
				  4<br>
				  5<br>
				  6<br>
				  7<br>
				</p>
			</div>
		</ons-page>
	</template>

	


















































	<ons-modal direction="up">
		<div style="text-align: center">
			<p id="modal-text" class="rtl"></p>
		</div>
	</ons-modal>
	<template id="dialog.html">
		<ons-dialog id="dialog-alert">
			<div style="text-align: center; padding: 10px;">
				<p id="dialog-text" class="rtl"><p>
				<p><ons-button onclick="hideDialog('dialog-alert')">OK</ons-button></p>
			</div>
		</ons-dialog>
	</template>

</body>
</html>
  